<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="nuki"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:thing="http://eclipse.org/smarthome/schemas/thing-description/v1.0.0"
		xsi:schemaLocation="http://eclipse.org/smarthome/schemas/thing-description/v1.0.0 http://eclipse.org/smarthome/schemas/thing-description-1.0.0.xsd">

	<!-- Nuki Bridge (Bridge Type) -->
	<bridge-type id="bridge">
		<label>Nuki Bridge</label>
		<description>This bridge represents a Nuki Bridge on your local network. Nuki Smart Locks have to be paired via Bluetooth with it.</description>
		<config-description>
			<parameter name="ip" type="text" required="true">
				<label>IP Address</label>
				<description>The IP address of the Nuki Bridge. Look it up on your router. It is recommended to set a static IP address lease for the Nuki Bridge (and for your openHAB server too) on your router.</description>
			</parameter>
			<parameter name="port" type="integer" required="true">
				<label>Port</label>
				<description>The Port which you configured during Initial Bridge setup (https://nuki.io/en/support/bridge/bridge-setup/initial-bridge-setup/).</description>
				<default>8080</default>
			</parameter>
			<parameter name="apiToken" type="text" required="true">
				<label>API Token</label>
				<description>The API Token which you configured during Initial Bridge setup (https://nuki.io/en/support/bridge/bridge-setup/initial-bridge-setup/).</description>
			</parameter>
		</config-description>
	</bridge-type>

	<!-- Nuki Smart Lock (Thing Type) -->
	<thing-type id="smartlock">
		<supported-bridge-type-refs>
			<bridge-type-ref id="bridge" />
		</supported-bridge-type-refs>
		<label>Nuki Smart Lock</label>
		<description>Nuki Smart Lock which is paired via Bluetooth to a Nuki Bridge.</description>
		<channels>
			<channel id="unlock" typeId="smartlockUnlock" />
			<channel id="lockAction" typeId="smartlockLockAction" />
			<channel id="lowBattery" typeId="system.low-battery" />
		</channels>
		<config-description>
			<parameter name="nukiId" type="text" required="true">
				<label>Nuki ID</label>
				<description>The ID of the Nuki Smart Lock. Get it through the Bridge HTTP-API (https://nuki.io/en/api/), Endpoint */list*.</description>
			</parameter>
			<parameter name="unlatch" type="boolean" required="true">
				<label>Unlatch</label>
				<description>If switched to On (or set to true) the Nuki Smart Lock will unlock the door but then also automatically pull the latch of the door lock. Usually, if the door hinges are correctly adjusted, the door will then swing open.</description>
				<default>false</default>
			</parameter>
		</config-description>
	</thing-type>

	<!-- Channel Type -->
	<channel-type id="smartlockUnlock">
		<item-type>Switch</item-type>
		<label>Nuki Smart Lock Unlock / Lock</label>
		<description>Use this channel with a Switch Item to unlock and lock the door. Configure "Unlatch" to true if your Nuki Smart Lock is mounted on a door lock with a knob on the outside.</description>
		<category>Door</category>
		<state>
			<options>
				<option value="OFF">Unlocks the door</option>
				<option value="ON">Locks the door</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="smartlockLockAction">
		<item-type>Number</item-type>
		<label>Nuki Smart Lock Lock Actions</label>
		<description>Use this channel if you want to execute other supported lock actions or to display the current lock state. See README.md (https://github.com/openhab/openhab2-addons/tree/master/addons/binding/org.openhab.binding.nuki) for supported lock actions and lock states.</description>
		<category>Door</category>
		<state>
			<options>
				<option value="2">Unlock</option>
				<option value="7">Unlatch</option>
				<option value="1002">Lock 'n' go</option>
				<option value="1007">Lock 'n' go with unlatch</option>
				<option value="4">Lock</option>
			</options>
		</state>
	</channel-type>

</thing:thing-descriptions>
