/**
 * Copyright (c) 2010-2021 Contributors to the openHAB project
 *
 * See the NOTICE file(s) distributed with this work for additional
 * information.
 *
 * This program and the accompanying materials are made available under the
 * terms of the Eclipse Public License 2.0 which is available at
 * http://www.eclipse.org/legal/epl-2.0
 *
 * SPDX-License-Identifier: EPL-2.0
 */
package org.openhab.binding.netatmo.internal.api;

import java.util.Set;

import org.eclipse.jdt.annotation.NonNullByDefault;

import com.google.gson.annotations.SerializedName;

/**
 * This enum describes events generated by webhooks and the type of
 * module they are related to according to API documentation
 *
 * @author GaÃ«l L'hopital - Initial contribution
 */
@NonNullByDefault
public enum EventType {
    UNKNOWN(),
    @SerializedName("person") // When the Indoor Camera detects a face
    PERSON(ModuleType.NAPerson, ModuleType.NACamera),

    @SerializedName("person_away") // When geofencing indicates that the person has left the home
    PERSON_AWAY(ModuleType.NAPerson),

    @SerializedName("outdoor") // When the Outdoor Camera detects a human, a car or an animal
    OUTDOOR(ModuleType.NOC, ModuleType.NDB),

    @SerializedName("daily_summary") // When the Outdoor Camera video summary of the last 24 hours is available
    DAILY_SUMMARY(ModuleType.NOC),

    @SerializedName("movement") // When the Indoor Camera detects motion
    MOVEMENT(ModuleType.NACamera),

    @SerializedName("new_module") // A new Module has been paired with the Indoor Camera
    NEW_MODULE(ModuleType.NACamera),

    @SerializedName("module_connect") // Module is connected with the Indoor Camera
    MODULE_CONNECT(ModuleType.NACamera),

    @SerializedName("module_disconnect") // Module lost its connection with the Indoor Camera
    MODULE_DISCONNECT(ModuleType.NACamera),

    @SerializedName("module_low_battery") // Module's battery is low
    MODULE_LOW_BATTERY(ModuleType.NACamera),

    @SerializedName("module_end_update") // Module's firmware update is over
    MODULE_END_UPDATE(ModuleType.NACamera),

    @SerializedName("connection") // When the Camera connects to Netatmo servers
    CONNECTION(ModuleType.NACamera, ModuleType.NOC),

    @SerializedName("disconnection") // When the Camera loses connection with Netatmo servers
    DISCONNECTION(ModuleType.NACamera, ModuleType.NOC),

    @SerializedName("on") // When Camera Monitoring is resumed
    ON(ModuleType.NACamera, ModuleType.NOC),

    @SerializedName("off") // When Camera Monitoring is turned off
    OFF(ModuleType.NACamera, ModuleType.NOC),

    @SerializedName("boot") // When the Camera is booting
    BOOT(ModuleType.NACamera, ModuleType.NOC),

    @SerializedName("sd") // When Camera SD Card status changes
    SD(ModuleType.NACamera, ModuleType.NOC),

    @SerializedName("alim") // When Camera power supply status changes
    ALIM(ModuleType.NACamera, ModuleType.NOC);

    private final Set<ModuleType> appliesTo;

    EventType(ModuleType... appliesTo) {
        this.appliesTo = Set.of(appliesTo);
    }

    @Override
    public String toString() {
        return name().toLowerCase();
    }

    public boolean appliesOn(ModuleType searched) {
        return appliesTo.contains(searched);
    }
}
