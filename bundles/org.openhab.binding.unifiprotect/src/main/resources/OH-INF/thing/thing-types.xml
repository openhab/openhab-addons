<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="unifiprotect"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<!-- Bridge: NVR -->
	<bridge-type id="nvr">
		<label>UniFi Protect NVR</label>
		<description>UniFi Protect NVR bridge providing device and event streams</description>
		<properties>
			<property name="applicationVersion">Protect application version</property>
		</properties>
		<config-description>
			<parameter name="hostname" type="text" required="true">
				<context>network-address</context>
				<label>Hostname</label>
				<description>Hostname or IP address of the NVR</description>
			</parameter>
			<parameter name="token" type="text" required="true">
				<label>Token</label>
				<description>Bearer token used for API/WebSocket authentication</description>
			</parameter>
		</config-description>
	</bridge-type>

	<!-- Camera Thing -->
	<thing-type id="camera">
		<supported-bridge-type-refs>
			<bridge-type-ref id="nvr"/>
		</supported-bridge-type-refs>
		<label>UniFi Protect Camera</label>
		<description>Individual Protect camera</description>
		<!-- Channels are dynamically created based on the camera capabilities -->
		<representation-property>deviceId</representation-property>
		<config-description>
			<parameter name="deviceId" type="text" required="true">
				<label>Device ID</label>
				<description>Unique device identifier</description>
			</parameter>
			<parameter name="enableWebRTC" type="boolean" required="true">
				<default>true</default>
				<label>Enable WebRTC</label>
				<description>Enables WebRTC play and publish streams through openHAB</description>
			</parameter>
		</config-description>
	</thing-type>

	<!-- Floodlight Thing -->
	<thing-type id="light">
		<supported-bridge-type-refs>
			<bridge-type-ref id="nvr"/>
		</supported-bridge-type-refs>
		<label>UniFi Protect Floodlight</label>
		<description>Protect floodlight</description>
		<channels>
			<channel id="light" typeId="light-switch"/>
			<channel id="is-dark" typeId="is-dark"/>
			<channel id="pir-motion" typeId="motion"/>
			<channel id="last-motion" typeId="last-motion"/>
			<channel id="light-mode" typeId="light-mode"/>
			<channel id="enable-at" typeId="enable-at"/>
			<channel id="indicator-enabled" typeId="indicator-enabled"/>
			<channel id="pir-duration" typeId="pir-duration"/>
			<channel id="pir-sensitivity" typeId="pir-sensitivity"/>
			<channel id="led-level" typeId="led-level"/>
		</channels>
		<properties>
			<property name="deviceId">Unique device identifier</property>
		</properties>
		<representation-property>deviceId</representation-property>
		<config-description>
			<parameter name="deviceId" type="text" required="true">
				<label>Device ID</label>
				<description>Unique device identifier</description>
			</parameter>
		</config-description>
	</thing-type>

	<!-- Sensor Thing -->
	<thing-type id="sensor">
		<supported-bridge-type-refs>
			<bridge-type-ref id="nvr"/>
		</supported-bridge-type-refs>
		<label>UniFi Protect Sensor</label>
		<description>Protect environmental/contact sensor</description>
		<channels>
			<channel id="battery" typeId="battery"/>
			<channel id="contact" typeId="contact"/>
			<channel id="temperature" typeId="temperature"/>
			<channel id="humidity" typeId="humidity"/>
			<channel id="illuminance" typeId="illuminance"/>
			<channel id="motion" typeId="motion"/>
			<channel id="alarm-contact" typeId="alarm-contact"/>
			<channel id="alarm" typeId="alarm"/>
			<channel id="water-leak-contact" typeId="water-leak-contact"/>
			<channel id="water-leak" typeId="water-leak"/>
			<channel id="tamper-contact" typeId="tamper-contact"/>
			<channel id="tamper" typeId="tamper"/>
			<channel id="opened" typeId="opened"/>
			<channel id="closed" typeId="closed"/>
		</channels>
		<properties>
			<property name="deviceId">Unique device identifier</property>
			<property name="mountType">Sensor mounting type</property>
		</properties>
		<representation-property>deviceId</representation-property>
		<config-description>
			<parameter name="deviceId" type="text" required="true">
				<label>Device ID</label>
				<description>Unique device identifier</description>
			</parameter>
		</config-description>
	</thing-type>

	<channel-type id="doorbell-default-message">
		<item-type>String</item-type>
		<label>Doorbell Default Message</label>
		<description>Default doorbell LCD message text configured on the NVR</description>
	</channel-type>

	<channel-type id="doorbell-default-message-reset-timeout">
		<item-type>Number:Time</item-type>
		<label>Doorbell Default Message Reset Timeout</label>
		<description>Default doorbell LCD message reset timeout</description>
	</channel-type>

	<channel-type id="device-added" advanced="true">
		<kind>trigger</kind>
		<label>Device Added</label>
		<description>Device was added to Protect</description>
		<event>
			<options>
				<option value="nvr">nvr</option>
				<option value="camera">camera</option>
				<option value="chime">chime</option>
				<option value="light">light</option>
				<option value="viewer">viewer</option>
				<option value="speaker">speaker</option>
				<option value="bridge">bridge</option>
				<option value="doorlock">doorlock</option>
				<option value="sensor">sensor</option>
				<option value="aiprocessor">aiprocessor</option>
				<option value="aiport">aiport</option>
				<option value="linkstation">linkstation</option>
			</options>
		</event>
	</channel-type>

	<channel-type id="device-updated" advanced="true">
		<kind>trigger</kind>
		<label>Device Updated</label>
		<description>Device was updated in Protect</description>
		<event>
			<options>
				<option value="nvr">nvr</option>
				<option value="camera">camera</option>
				<option value="chime">chime</option>
				<option value="light">light</option>
				<option value="viewer">viewer</option>
				<option value="speaker">speaker</option>
				<option value="bridge">bridge</option>
				<option value="doorlock">doorlock</option>
				<option value="sensor">sensor</option>
				<option value="aiprocessor">aiprocessor</option>
				<option value="aiport">aiport</option>
				<option value="linkstation">linkstation</option>
			</options>
		</event>
	</channel-type>

	<channel-type id="device-removed" advanced="true">
		<kind>trigger</kind>
		<label>Device Removed</label>
		<description>Device was removed from Protect</description>
		<event>
			<options>
				<option value="nvr">nvr</option>
				<option value="camera">camera</option>
				<option value="chime">chime</option>
				<option value="light">light</option>
				<option value="viewer">viewer</option>
				<option value="speaker">speaker</option>
				<option value="bridge">bridge</option>
				<option value="doorlock">doorlock</option>
				<option value="sensor">sensor</option>
				<option value="aiprocessor">aiprocessor</option>
				<option value="aiport">aiport</option>
				<option value="linkstation">linkstation</option>
			</options>
		</event>
	</channel-type>

	<!-- Light channel types -->
	<channel-type id="light-switch">
		<item-type>Switch</item-type>
		<label>Main Light</label>
		<description>Enable or disable the main floodlight</description>
		<tags>
			<tag>Control</tag>
			<tag>Light</tag>
		</tags>
	</channel-type>

	<channel-type id="is-dark">
		<item-type>Switch</item-type>
		<label>Is Dark</label>
		<description>Scene is currently dark</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Illuminance</tag>
		</tags>
	</channel-type>

	<channel-type id="last-motion">
		<item-type>DateTime</item-type>
		<label>Last Motion</label>
		<description>Timestamp of last motion detected</description>
		<tags>
			<tag>Status</tag>
			<tag>Timestamp</tag>
		</tags>
	</channel-type>

	<channel-type id="light-mode">
		<item-type>String</item-type>
		<label>Light Mode</label>
		<description>When will floodlight turn on</description>
		<tags>
			<tag>Control</tag>
			<tag>Mode</tag>
		</tags>
		<state>
			<options>
				<option value="always">always</option>
				<option value="motion">motion</option>
				<option value="off">off</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="enable-at">
		<item-type>String</item-type>
		<label>Enable At</label>
		<description>When the lighting mode is relevant</description>
		<tags>
			<tag>Control</tag>
			<tag>Mode</tag>
		</tags>
		<state>
			<options>
				<option value="fulltime">fulltime</option>
				<option value="dark">dark</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="indicator-enabled">
		<item-type>Switch</item-type>
		<label>Status Indicator</label>
		<description>Enable or disable floodlight status LED indicator</description>
		<tags>
			<tag>Control</tag>
			<tag>Light</tag>
		</tags>
	</channel-type>

	<channel-type id="pir-duration">
		<item-type>Number:Time</item-type>
		<label>PIR Duration</label>
		<description>How long the light stays on after motion</description>
		<tags>
			<tag>Control</tag>
			<tag>Duration</tag>
		</tags>
	</channel-type>

	<channel-type id="pir-sensitivity">
		<item-type>Number:Dimensionless</item-type>
		<label>PIR Sensitivity</label>
		<description>PIR motion sensitivity (0-100)</description>
		<tags>
			<tag>Control</tag>
			<tag>Level</tag>
		</tags>
		<state min="0" max="100" step="1" pattern="%d %%"/>
	</channel-type>

	<channel-type id="led-level">
		<item-type>Number</item-type>
		<label>LED Level</label>
		<description>Brightness level of the main LED (1-6)</description>
		<tags>
			<tag>Control</tag>
			<tag>Brightness</tag>
		</tags>
		<state min="1" max="6" step="1" pattern="%d"/>
	</channel-type>

	<!-- Sensor channel types -->
	<channel-type id="battery">
		<item-type>Number</item-type>
		<label>Battery</label>
		<description>Battery charge level (%)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Level</tag>
		</tags>
		<state min="0" max="100" pattern="%d %%" readOnly="true"/>
	</channel-type>

	<channel-type id="contact">
		<item-type>Contact</item-type>
		<label>Contact</label>
		<description>Contact state (open/closed)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>OpenState</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="temperature">
		<item-type>Number:Temperature</item-type>
		<label>Temperature</label>
		<description>Ambient temperature</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Temperature</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="humidity">
		<item-type>Number</item-type>
		<label>Humidity</label>
		<description>Ambient humidity</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Humidity</tag>
		</tags>
		<state min="0" max="100" pattern="%d %%" readOnly="true"/>
	</channel-type>

	<channel-type id="illuminance">
		<item-type>Number:Illuminance</item-type>
		<label>Illuminance</label>
		<description>Ambient light (Lux)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Illuminance</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="alarm-contact">
		<item-type>Contact</item-type>
		<label>Alarm</label>
		<description>Smoke or CO alarm state (OPEN = alarming)</description>
		<tags>
			<tag>Alarm</tag>
		</tags>
	</channel-type>

	<channel-type id="alarm" advanced="true">
		<kind>trigger</kind>
		<label>Alarm</label>
		<description>Smoke or CO alarm event</description>
		<event>
			<options>
				<option value="smoke">smoke</option>
				<option value="CO">CO</option>
			</options>
		</event>
	</channel-type>

	<channel-type id="water-leak-contact">
		<item-type>Contact</item-type>
		<label>Water Leak</label>
		<description>Water leak state (OPEN = leak detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Water</tag>
		</tags>
	</channel-type>

	<channel-type id="water-leak" advanced="true">
		<kind>trigger</kind>
		<label>Water Leak</label>
		<description>Water leak detected</description>
		<event>
			<options>
				<option value="door">door</option>
				<option value="window">window</option>
				<option value="garage">garage</option>
				<option value="leak">leak</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>

	<channel-type id="tamper-contact">
		<item-type>Contact</item-type>
		<label>Tamper</label>
		<description>Tamper state (OPEN = tampering)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Tampered</tag>
		</tags>
	</channel-type>

	<channel-type id="tamper" advanced="true">
		<kind>trigger</kind>
		<label>Tamper</label>
		<description>Tampering detected</description>
	</channel-type>

	<channel-type id="opened" advanced="true">
		<kind>trigger</kind>
		<label>Opened</label>
		<description>Sensor opened</description>
		<event>
			<options>
				<option value="door">door</option>
				<option value="window">window</option>
				<option value="garage">garage</option>
				<option value="leak">leak</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>

	<channel-type id="closed" advanced="true">
		<kind>trigger</kind>
		<label>Closed</label>
		<description>Sensor closed</description>
		<event>
			<options>
				<option value="door">door</option>
				<option value="window">window</option>
				<option value="garage">garage</option>
				<option value="leak">leak</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>

	<!-- Camera channel types -->
	<channel-type id="ring" advanced="true">
		<kind>trigger</kind>
		<label>Doorbell Ring</label>
		<description>Doorbell ring event</description>
		<event>
			<options>
				<option value="PRESSED">pressed</option>
				<option value="RELEASED">released</option>
			</options>
		</event>
	</channel-type>

	<channel-type id="ring-contact">
		<item-type>Contact</item-type>
		<label>Doorbell Ring</label>
		<description>Doorbell ring state (OPEN = doorbell ring detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Presence</tag>
		</tags>
		<config-description-ref uri="thing-type:unifiprotect:latching-contact-config"/>
	</channel-type>

	<channel-type id="snapshot">
		<item-type>Image</item-type>
		<label>Snapshot</label>
		<description>Latest camera snapshot image</description>
		<tags>
			<tag>Status</tag>
			<tag>Info</tag>
		</tags>
		<config-description-ref uri="thing-type:unifiprotect:snapshot-config"/>
	</channel-type>

	<channel-type id="mic-volume">
		<item-type>Number</item-type>
		<label>Microphone Volume</label>
		<description>Microphone volume (0-100)</description>
		<tags>
			<tag>Control</tag>
			<tag>SoundVolume</tag>
		</tags>
		<state min="0" max="100" step="1" pattern="%d %%"/>
	</channel-type>

	<channel-type id="video-mode">
		<item-type>String</item-type>
		<label>Video Mode</label>
		<description>Current video mode of the camera</description>
		<tags>
			<tag>Control</tag>
			<tag>Mode</tag>
		</tags>
		<state>
			<options>
				<option value="default">Default</option>
				<option value="highFps">High FPS</option>
				<option value="sport">Sport</option>
				<option value="slowShutter">Slow Shutter</option>
				<option value="lprReflex">LPR Reflex</option>
				<option value="lprNoneReflex">LPR Non-Reflex</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="hdr-type">
		<item-type>String</item-type>
		<label>HDR Mode</label>
		<description>High Dynamic Range (HDR) mode</description>
		<tags>
			<tag>Control</tag>
			<tag>Mode</tag>
		</tags>
		<state>
			<options>
				<option value="auto">Auto</option>
				<option value="on">On</option>
				<option value="off">Off</option>
			</options>
		</state>
	</channel-type>

	<channel-type id="osd-name">
		<item-type>Switch</item-type>
		<label>OSD Name</label>
		<description>Show the name on the camera OSD</description>
		<tags>
			<tag>Control</tag>
			<tag>Info</tag>
		</tags>
	</channel-type>

	<channel-type id="osd-date">
		<item-type>Switch</item-type>
		<label>OSD Date</label>
		<description>Show the date on the camera OSD</description>
		<tags>
			<tag>Control</tag>
			<tag>Info</tag>
		</tags>
	</channel-type>

	<channel-type id="osd-logo">
		<item-type>Switch</item-type>
		<label>OSD Logo</label>
		<description>Show the logo on the camera OSD</description>
		<tags>
			<tag>Control</tag>
			<tag>Info</tag>
		</tags>
	</channel-type>

	<channel-type id="rtsp-url" advanced="true">
		<item-type>String</item-type>
		<label>RTSP Stream URL</label>
		<description>RTSP stream URL</description>
		<tags>
			<tag>Status</tag>
			<tag>Info</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="webrtc-url">
		<item-type>String</item-type>
		<label>WebRTC URL</label>
		<description>WebRTC stream URL</description>
		<tags>
			<tag>Status</tag>
			<tag>Info</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="snapshot-url">
		<item-type>String</item-type>
		<label>Snapshot URL</label>
		<description>Snapshot image URL</description>
		<tags>
			<tag>Status</tag>
			<tag>Info</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="led-enabled">
		<item-type>Switch</item-type>
		<label>Status LED</label>
		<description>Enable or disable the camera status LED</description>
		<tags>
			<tag>Control</tag>
			<tag>Light</tag>
		</tags>
	</channel-type>

	<channel-type id="active-patrol-slot">
		<item-type>Number</item-type>
		<label>Active Patrol Slot</label>
		<description>Currently active PTZ patrol slot</description>
		<tags>
			<tag>Status</tag>
			<tag>Info</tag>
		</tags>
	</channel-type>

	<!-- Triggers (for rules) -->
	<channel-type id="motion" advanced="true">
		<kind>trigger</kind>
		<label>Motion</label>
		<description>Camera motion detected</description>
	</channel-type>

	<channel-type id="motion-contact">
		<item-type>Contact</item-type>
		<label>Motion</label>
		<description>Motion state (OPEN = motion detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Motion</tag>
		</tags>
		<config-description-ref uri="thing-type:unifiprotect:latching-contact-config"/>
	</channel-type>

	<channel-type id="smart-detect-audio" advanced="true">
		<kind>trigger</kind>
		<label>Smart Detect Audio</label>
		<description>Audio-based smart detection event</description>
		<event>
			<options>
				<option value="alrmSmoke">smoke alarm</option>
				<option value="alrmCmonx">carbon monoxide alarm</option>
				<option value="alrmSiren">siren</option>
				<option value="alrmBabyCry">baby cry</option>
				<option value="alrmSpeak">speech</option>
				<option value="alrmBark">dog bark</option>
				<option value="alrmBurglar">burglar alarm</option>
				<option value="alrmCarHorn">car horn</option>
				<option value="alrmGlassBreak">glass break</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>
	<channel-type id="smart-detect-audio-contact">
		<item-type>Contact</item-type>
		<label>Smart Detect Audio</label>
		<description>Smart audio detect state (OPEN = smart audio detect detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Noise</tag>
		</tags>
		<config-description-ref uri="thing-type:unifiprotect:latching-contact-config"/>
	</channel-type>

	<channel-type id="smart-detect-zone" advanced="true">
		<kind>trigger</kind>
		<label>Smart Detect Zone</label>
		<description>Zone-based smart detection event</description>
		<event>
			<options>
				<option value="person">person</option>
				<option value="vehicle">vehicle</option>
				<option value="package">package</option>
				<option value="licensePlate">license plate</option>
				<option value="face">face</option>
				<option value="animal">animal</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>
	<channel-type id="smart-detect-zone-contact">
		<item-type>Contact</item-type>
		<label>Smart Detect Zone</label>
		<description>Smart detect zone state (OPEN = smart detect zone detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Presence</tag>
		</tags>
	</channel-type>
	<channel-type id="smart-detect-line" advanced="true">
		<kind>trigger</kind>
		<label>Smart Detect Line</label>
		<description>Line-based smart detection event</description>
		<event>
			<options>
				<option value="person">person</option>
				<option value="vehicle">vehicle</option>
				<option value="package">package</option>
				<option value="licensePlate">license plate</option>
				<option value="face">face</option>
				<option value="animal">animal</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>
	<channel-type id="smart-detect-line-contact">
		<item-type>Contact</item-type>
		<label>Smart Detect Line</label>
		<description>Smart detect line state (OPEN = smart detect line detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Presence</tag>
		</tags>
		<config-description-ref uri="thing-type:unifiprotect:latching-contact-config"/>
	</channel-type>
	<channel-type id="smart-detect-loiter" advanced="true">
		<kind>trigger</kind>
		<label>Smart Detect Loiter</label>
		<description>Loitering smart detection event</description>
		<event>
			<options>
				<option value="person">person</option>
				<option value="vehicle">vehicle</option>
				<option value="package">package</option>
				<option value="licensePlate">license plate</option>
				<option value="face">face</option>
				<option value="animal">animal</option>
				<option value="none">none</option>
			</options>
		</event>
	</channel-type>
	<channel-type id="smart-detect-loiter-contact">
		<item-type>Contact</item-type>
		<label>Smart Detect Loiter</label>
		<description>Smart detect loiter state (OPEN = smart detect loiter detected)</description>
		<tags>
			<tag>Measurement</tag>
			<tag>Presence</tag>
		</tags>
		<config-description-ref uri="thing-type:unifiprotect:latching-contact-config"/>
	</channel-type>
</thing:thing-descriptions>
