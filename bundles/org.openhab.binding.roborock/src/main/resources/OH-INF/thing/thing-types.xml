<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="roborock"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<bridge-type id="account">
		<label>Account</label>
		<description>Control Roborock devices</description>
		<semantic-equipment-tag>WebService</semantic-equipment-tag>
		<config-description>
			<parameter name="email" type="text" required="true">
				<label>Email Address</label>
				<description>email address for Roborock account</description>
			</parameter>
			<parameter name="password" type="text">
				<label>Password</label>
				<description>Password for Roborock account</description>
				<context>password</context>
			</parameter>
		</config-description>
	</bridge-type>
	<thing-type id="vacuum">
		<supported-bridge-type-refs>
			<bridge-type-ref id="account"/>
		</supported-bridge-type-refs>
		<label>Robot Vacuum</label>
		<description>Roborock Robot Vacuum Cleaner</description>
		<semantic-equipment-tag>CleaningRobot</semantic-equipment-tag>
		
		<channel-groups>
			<channel-group id="actions" typeId="actions"/>
			<channel-group id="status" typeId="status"/>
			<channel-group id="consumables" typeId="consumables"/>
			<channel-group id="dnd" typeId="dnd"/>
			<channel-group id="history" typeId="history"/>
			<channel-group id="cleaning" typeId="cleaning"/>
			<channel-group id="network" typeId="network"/>
			<channel-group id="info" typeId="info"/>
		</channel-groups>

		<config-description>
			<parameter name="refresh" type="integer" unit="min" min="1" required="false">
				<label>Refresh Interval</label>
				<advanced>true</advanced>
				<description>Specifies the refresh interval in minutes.</description>
				<unitLabel>Minutes</unitLabel>
				<default>5</default>
			</parameter>
		</config-description>
	</thing-type>

	<channel-group-type id="actions">
		<label>Action</label>
		<channels>
			<channel id="control" typeId="control"/>
			<channel id="commands" typeId="commands"/>
			<channel id="rpc" typeId="rpc"/>
			<channel id="fan" typeId="fan"/>
			<channel id="vacuum" typeId="vacuum"/>
			<channel id="segment" typeId="segment"/>
			<channel id="routine" typeId="routine"/>
		</channels>
	</channel-group-type>

	<channel-group-type id="status">
		<label>Status</label>
		<channels>
			<channel id="battery" typeId="system.battery-level"/>
			<channel id="clean-area" typeId="clean-area"/>
			<channel id="clean-time" typeId="clean-time"/>
			<channel id="error-code" typeId="error-code"/>
			<channel id="error-id" typeId="error-id"/>
			<channel id="fan-power" typeId="fan-power"/>
			<channel id="in-cleaning" typeId="in-cleaning"/>
			<channel id="dnd-enabled" typeId="dnd-enabled"/>
			<channel id="map-present" typeId="map-present"/>
			<channel id="state" typeId="state"/>
			<channel id="state-id" typeId="state-id"/>
			<channel id="segment-status" typeId="segment-status"/>
			<channel id="map-status" typeId="map-status"/>
			<channel id="led-status" typeId="led-status"/>
		</channels>
	</channel-group-type>
	<channel-group-type id="consumables">
		<label>Consumables</label>
		<channels>
			<channel id="main-brush-percent" typeId="main-brush-percent"/>
			<channel id="side-brush-percent" typeId="side-brush-percent"/>
			<channel id="filter-percent" typeId="filter-percent"/>
			<channel id="sensor-dirt-percent" typeId="sensor-dirt-percent"/>
			<channel id="main-brush-time" typeId="main-brush-time"/>
			<channel id="side-brush-time" typeId="side-brush-time"/>
			<channel id="filter-time" typeId="filter-time"/>
			<channel id="sensor-dirt-time" typeId="sensor-dirt-time"/>
			<channel id="consumable-reset" typeId="consumable-reset"/>
		</channels>
	</channel-group-type>
	<channel-group-type id="dnd">
		<label>Do Not Disturb</label>
		<channels>
			<channel id="dnd-function" typeId="dnd-function"/>
			<channel id="dnd-start" typeId="dnd-start"/>
			<channel id="dnd-end" typeId="dnd-end"/>
		</channels>
	</channel-group-type>
	<channel-group-type id="cleaning">
		<label>Last Cleaning Details</label>
		<channels>
			<channel id="last-clean-start-time" typeId="last-clean-start-time"/>
			<channel id="last-clean-end-time" typeId="last-clean-end-time"/>
			<channel id="last-clean-area" typeId="last-clean-area"/>
			<channel id="last-clean-duration" typeId="last-clean-duration"/>
			<channel id="last-clean-error" typeId="last-clean-error"/>
			<channel id="last-clean-finish" typeId="last-clean-finish"/>
			<channel id="last-clean-finish-reason" typeId="last-clean-finish-reason"/>
			<channel id="last-clean-dustcollection-status" typeId="last-clean-dustcollection-status"/>
			<channel id="last-clean-record" typeId="last-clean-record"/>
			<channel id="map" typeId="map"/>
		</channels>
	</channel-group-type>
	<channel-group-type id="history">
		<label>History</label>
		<channels>
			<channel id="total-clean-area" typeId="total-clean-area"/>
			<channel id="total-clean-time" typeId="total-clean-time"/>
			<channel id="total-clean-count" typeId="total-clean-count"/>
		</channels>
	</channel-group-type>
	<channel-group-type id="info">
		<label>Info</label>
		<channels>
			<channel id="multi-maps-list" typeId="multi-maps-list"/>
			<channel id="room-mapping" typeId="room-mapping"/>
			<channel id="routine-mapping" typeId="routine-mapping"/>
			<channel id="fw-features" typeId="fw-features"/>
			<channel id="customize-clean-mode" typeId="customize-clean-mode"/>
			<channel id="carpet-mode" typeId="carpet-mode"/>
		</channels>
	</channel-group-type>
	<channel-group-type id="network">
		<label>Network</label>
		<channels>
			<channel id="ssid" typeId="ssid"/>
			<channel id="bssid" typeId="bssid"/>
			<channel id="rssi" typeId="rssi"/>
		</channels>
	</channel-group-type>

	<!-- Status channels -->
	<channel-type id="clean-area">
		<item-type>Number:Area</item-type>
		<label>Cleaning Area</label>
		<state pattern="%.2f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="clean-time">
		<item-type>Number:Time</item-type>
		<label>Cleaning Time</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="dnd-enabled">
		<item-type>Switch</item-type>
		<label>Do Not Disturb</label>
	</channel-type>
	<channel-type id="error-code">
		<item-type>String</item-type>
		<label>Error Code</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="error-id">
		<item-type>Number</item-type>
		<label>Error ID</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="fan-power">
		<item-type>Number:Dimensionless</item-type>
		<label>Fan Power</label>
		<state min="1" max="99" step="1" pattern="%.0f%%" readOnly="false"/>
	</channel-type>
	<channel-type id="in-cleaning" advanced="true">
		<item-type>Number</item-type>
		<label>In Cleaning?</label>
		<description>1 = Cleaning, 0 = Not Cleaning</description>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>
	<channel-type id="map-present" advanced="true">
		<item-type>Number</item-type>
		<label>Map Present</label>
		<category>Energy</category>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>
	<channel-type id="msg-seq" advanced="true">
		<item-type>Number</item-type>
		<label>Msg Seq</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="state">
		<item-type>String</item-type>
		<label>State</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="state-id">
		<item-type>Number</item-type>
		<label>State ID</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="segment-status" advanced="true">
		<item-type>Number</item-type>
		<label>Segment Status</label>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>
	<channel-type id="map-status" advanced="true">
		<item-type>Number</item-type>
		<label>Map Status</label>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>
	<channel-type id="led-status" advanced="true">
		<item-type>Number</item-type>
		<label>Led Status</label>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>

	<!-- Dynamic Status Channels -->
	<channel-type id="water-box-mode">
		<item-type>Number</item-type>
		<label>Water Box Mode</label>
		<state min="200" max="204" step="1" pattern="%.0f%%" readOnly="false"/>
	</channel-type>
	<channel-type id="mop-mode">
		<item-type>Number</item-type>
		<label>Mop Mode</label>
		<tags>
			<tag>Status</tag>
			<tag>Mode</tag>
		</tags>
		<state min="300" max="303" step="1" pattern="%.0f%%" readOnly="false">
			<options>
				<option value="300">Standard</option>
				<option value="301">Deep</option>
				<option value="303">Deep+</option>
			</options>
		</state>
	</channel-type>
	<channel-type id="water-box-status">
		<item-type>Switch</item-type>
		<label>Water Box State</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="water-box-carriage-status">
		<item-type>Switch</item-type>
		<label>Water Box Carriage State</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="lock-status">
		<item-type>Switch</item-type>
		<label>Lock Status</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="mop-forbidden-enable">
		<item-type>Switch</item-type>
		<label>Mop Forbidden</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="is-locating">
		<item-type>Switch</item-type>
		<label>Robot Locating</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="dock-state">
		<item-type>String</item-type>
		<label>Dock State</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="dock-state-id">
		<item-type>Number</item-type>
		<label>Dock State ID</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="mop-drying-time">
		<item-type>Number:Time</item-type>
		<label>Mop Drying Time</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="is-mop-drying">
		<item-type>Switch</item-type>
		<label>Mop Cleaning Active</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="collect-dust">
		<item-type>Switch</item-type>
		<label>Start Collecting Dust</label>
		<description>Once the vacuum cleaner is back in place, you can start collecting the dust</description>
	</channel-type>
	<channel-type id="clean-mop-start">
		<item-type>Switch</item-type>
		<label>Start Mop Wash</label>
		<description>Once the vacuum cleaner is back in place, you can start cleaning the mop</description>
	</channel-type>
	<channel-type id="clean-mop-stop">
		<item-type>Switch</item-type>
		<label>Stop Mop Wash</label>
	</channel-type>

	<!-- Consumables channels -->
	<channel-type id="main-brush-percent">
		<item-type>Number</item-type>
		<label>Main Brush Remaining</label>
		<state pattern="%.0f%%" readOnly="true"/>
	</channel-type>
	<channel-type id="side-brush-percent">
		<item-type>Number</item-type>
		<label>Side Brush Remaining</label>
		<state pattern="%.0f%%" readOnly="true"/>
	</channel-type>
	<channel-type id="filter-percent">
		<item-type>Number</item-type>
		<label>Filter Usage Remaining</label>
		<state pattern="%.0f%%" readOnly="true"/>
	</channel-type>
	<channel-type id="sensor-dirt-percent">
		<item-type>Number</item-type>
		<label>Sensor Dirt Remaining</label>
		<state pattern="%.0f%%" readOnly="true"/>
	</channel-type>
	<channel-type id="main-brush-time" advanced="true">
		<item-type>Number:Time</item-type>
		<label>Main Brush Time till Replacement</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="side-brush-time" advanced="true">
		<item-type>Number:Time</item-type>
		<label>Side Brush Time till Replacement</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="filter-time" advanced="true">
		<item-type>Number:Time</item-type>
		<label>Filter Time till Replacement</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="sensor-dirt-time" advanced="true">
		<item-type>Number:Time</item-type>
		<label>Sensor Dirt Time till Cleaning</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>

	<!-- actions -->
	<channel-type id="control">
		<item-type>String</item-type>
		<label>Control Vacuum</label>
		<tags>
			<tag>Control</tag>
			<tag>Mode</tag>
		</tags>
		<state>
			<options>
				<option value="vacuum">Vacuum</option>
				<option value="spot">Spot Clean</option>
				<option value="pause">Pause</option>
				<option value="dock">Dock</option>
			</options>
		</state>
	</channel-type>
	<channel-type id="fan">
		<item-type>Number</item-type>
		<label>Control Fan Level</label>
		<state min="-1" max="105" step="1" readOnly="false">
			<options>
				<option value="38">Silent</option>
				<option value="60">Standard</option>
				<option value="75">Turbo</option>
				<option value="77">Power</option>
				<option value="90">Full</option>
				<option value="100">Max</option>
				<option value="101">Quiet</option>
				<option value="102">Balanced</option>
				<option value="103">Turbov2</option>
				<option value="104">Maxv2</option>
				<option value="105">Mob</option>
				<option value="-1">Custom</option>
			</options>
		</state>
	</channel-type>
	<channel-type id="vacuum" advanced="true">
		<item-type>Switch</item-type>
		<label>Vacuum On/Off</label>
	</channel-type>
	<channel-type id="segment" advanced="true">
		<item-type>String</item-type>
		<label>Vacuum Room [room#]</label>
	</channel-type>
	<channel-type id="routine" advanced="true">
		<item-type>String</item-type>
		<label>Vacuum Routine [routine#]</label>
	</channel-type>

	<channel-type id="consumable-reset">
		<item-type>String</item-type>
		<label>Reset Consumable</label>
		<state>
			<options>
				<option value="none">Select Consumable</option>
				<option value="main-brush-work-time">Reset Mainbrush</option>
				<option value="side-brush-work-time">Reset Sidebrush</option>
				<option value="filter-work-time">Reset Filter</option>
				<option value="sensor-dirty-time">Reset Sensors</option>
			</options>
		</state>
	</channel-type>
	<!-- DND Setting -->
	<channel-type id="dnd-function">
		<item-type>Switch</item-type>
		<label>Do Not Disturb Functionality</label>
	</channel-type>
	<channel-type id="dnd-start">
		<item-type>String</item-type>
		<label>Start Time DND</label>
	</channel-type>
	<channel-type id="dnd-end">
		<item-type>String</item-type>
		<label>End Time DND</label>
	</channel-type>

	<!-- Clean History -->
	<channel-type id="total-clean-time">
		<item-type>Number:Time</item-type>
		<label>Total Cleaning Time</label>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="total-clean-area">
		<item-type>Number:Area</item-type>
		<label>Total Cleaning Area</label>
		<state pattern="%.1f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="total-clean-count">
		<item-type>Number</item-type>
		<label>Total Cleanings</label>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>

	<!-- Clean Record -->
	<channel-type id="last-clean-start-time">
		<item-type>DateTime</item-type>
		<label>Cleaning Start</label>
		<description>Last Cleaning Start Time</description>
		<tags>
			<tag>Status</tag>
			<tag>Timestamp</tag>
		</tags>
		<category>Time</category>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-end-time">
		<item-type>DateTime</item-type>
		<label>Cleaning End</label>
		<tags>
			<tag>Status</tag>
			<tag>Timestamp</tag>
		</tags>
		<description>Last Cleaning End Time</description>
		<category>Time</category>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-duration">
		<item-type>Number:Time</item-type>
		<label>Cleaning Duration</label>
		<tags>
			<tag>Status</tag>
			<tag>Duration</tag>
		</tags>
		<state pattern="%.0f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-area">
		<item-type>Number:Area</item-type>
		<label>Cleaning Area</label>
		<state pattern="%.1f %unit%" readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-error">
		<item-type>Number</item-type>
		<label>Error</label>
		<state pattern="%.0f" readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-finish">
		<item-type>Number</item-type>
		<label>Cleaning Finished</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-finish-reason">
		<item-type>Number</item-type>
		<label>Cleaning Finished Reason</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-dustcollection-status">
		<item-type>Number</item-type>
		<label>Dust Collection Status</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="last-clean-record" advanced="true">
		<item-type>String</item-type>
		<label>Cleaning Record</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="map" advanced="false">
		<item-type>Image</item-type>
		<label>Cleaning Map</label>
		<state readOnly="true"/>
	</channel-type>

	<!-- Info channels -->
	<channel-type id="fw-features" advanced="true">
		<item-type>String</item-type>
		<label>Firmware Features</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="room-mapping" advanced="true">
		<item-type>String</item-type>
		<label>Room Mapping</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="routine-mapping" advanced="true">
		<item-type>String</item-type>
		<label>Routine Mapping</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="multi-maps-list" advanced="true">
		<item-type>String</item-type>
		<label>Multi Map List</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="carpet-mode" advanced="true">
		<item-type>String</item-type>
		<label>Carpet Mode</label>
	</channel-type>
	<channel-type id="customize-clean-mode" advanced="true">
		<item-type>String</item-type>
		<label>Customized Clean Mode</label>
	</channel-type>

	<!-- Network channels -->
	<channel-type id="ssid" advanced="true">
		<item-type>String</item-type>
		<label>SSID</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="bssid" advanced="true">
		<item-type>String</item-type>
		<label>BSSID</label>
		<state readOnly="true"/>
	</channel-type>
	<channel-type id="rssi" advanced="true">
		<item-type>Number</item-type>
		<label>RSSI</label>
		<tags>
			<tag>Status</tag>
			<tag>RSSI</tag>
		</tags>
		<state readOnly="true"/>
	</channel-type>

	<!-- Common Actions channels -->
	<channel-type id="commands" advanced="true">
		<item-type>String</item-type>
		<label>Execute Command</label>
	</channel-type>
	<channel-type id="rpc" advanced="true">
		<item-type>String</item-type>
		<label>Execute RPC (cloud) Command</label>
	</channel-type>
	<channel-type id="power">
		<item-type>Switch</item-type>
		<label>Power On/Off</label>
		<tags>
			<tag>Control</tag>
			<tag>Power</tag>
		</tags>
	</channel-type>
</thing:thing-descriptions>
