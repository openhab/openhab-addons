<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="ferroamp"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
	xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd">

	<thing-type id="energyhub">
		<label>EnergyHub</label>
		<description>Provides information from Ferroamp EnergyHub</description>
		<channels>
			<channel id="grid-frequency" typeId="frequency">
				<label>Grid Frequency</label>
			</channel>
			<channel id="ace-current-l1" typeId="electric-current">
				<label>ACE L1</label>
			</channel>
			<channel id="ace-current-l2" typeId="electric-current">
				<label>ACE L2</label>
			</channel>
			<channel id="ace-current-l3" typeId="electric-current">
				<label>ACE L3</label>
			</channel>
			<channel id="grid-voltage-l1" typeId="electric-potential">
				<label>Grid Voltage L1</label>
			</channel>
			<channel id="grid-voltage-l2" typeId="electric-potential">
				<label>Grid Voltage L2</label>
			</channel>
			<channel id="grid-voltage-l3" typeId="electric-potential">
				<label>Grid Voltage L3</label>
			</channel>
			<channel id="inverter-rms-current-l1" typeId="electric-current">
				<label>RMS Current L1</label>
			</channel>
			<channel id="inverter-rms-current-l2" typeId="electric-current">
				<label>RMS Current L2</label>
			</channel>
			<channel id="inverter-rms-current-l3" typeId="electric-current">
				<label>RMS Current L3</label>
			</channel>
			<channel id="inverter-reactive-current-l1" typeId="electric-current">
				<label>React. Current L1</label>
			</channel>
			<channel id="inverter-reactive-current-l2" typeId="electric-current">
				<label>React. Current L2</label>
			</channel>
			<channel id="inverter-reactive-current-l3" typeId="electric-current">
				<label>React. Current L3</label>
			</channel>
			<channel id="inverter-active-current-l1" typeId="electric-current">
				<label>Act. Current L1</label>
			</channel>
			<channel id="inverter-active-current-l2" typeId="electric-current">
				<label>Act. Current L2</label>
			</channel>
			<channel id="inverter-active-current-l3" typeId="electric-current">
				<label>Act. Current L3</label>
			</channel>
			<channel id="grid-current-l1" typeId="electric-current">
				<label>Grid Current L1</label>
			</channel>
			<channel id="grid-current-l2" typeId="electric-current">
				<label>Grid Current L2</label>
			</channel>
			<channel id="grid-current-l3" typeId="electric-current">
				<label>Grid Current L3</label>
			</channel>
			<channel id="grid-reactive-current-l1" typeId="electric-current">
				<label>Grid React. Current L1</label>
			</channel>
			<channel id="grid-reactive-current-l2" typeId="electric-current">
				<label>Grid React. Current L2</label>
			</channel>
			<channel id="grid-reactive-current-l3" typeId="electric-current">
				<label>Grid React. Current L3</label>
			</channel>
			<channel id="grid-active-current-l1" typeId="electric-current">
				<label>Grid Act. Current L1</label>
			</channel>
			<channel id="grid-active-current-l2" typeId="electric-current">
				<label>Grid Act. Current L2</label>
			</channel>
			<channel id="grid-active-current-l3" typeId="electric-current">
				<label>Grid Act. Current L3</label>
			</channel>
			<channel id="inverter-load-reactive-current-l1" typeId="electric-current">
				<label>Load React. Current L1</label>
			</channel>
			<channel id="inverter-load-reactive-current-l2" typeId="electric-current">
				<label>Load React. Current L2</label>
			</channel>
			<channel id="inverter-load-reactive-current-l3" typeId="electric-current">
				<label>Load React. Current L3</label>
			</channel>
			<channel id="inverter-load-active-current-l1" typeId="electric-current">
				<label>Load Act. Current L1</label>
			</channel>
			<channel id="inverter-load-active-current-l2" typeId="electric-current">
				<label>Load Act. Current L2</label>
			</channel>
			<channel id="inverter-load-active-current-l3" typeId="electric-current">
				<label>Load Act. Current L3</label>
			</channel>
			<channel id="apparent-power" typeId="power">
				<label>Apparent Power</label>
			</channel>
			<channel id="grid-power-active-l1" typeId="power">
				<label>Grid Power Act. L1</label>
			</channel>
			<channel id="grid-power-active-l2" typeId="power">
				<label>Grid Power Act. L2</label>
			</channel>
			<channel id="grid-power-active-l3" typeId="power">
				<label>Grid Power Act. L3</label>
			</channel>
			<channel id="grid-power-reactive-l1" typeId="power">
				<label>Grid Power React. L1</label>
			</channel>
			<channel id="grid-power-reactive-l2" typeId="power">
				<label>Grid Power React. L2</label>
			</channel>
			<channel id="grid-power-reactive-l3" typeId="power">
				<label>Grid Power React. L3</label>
			</channel>
			<channel id="inverter-power-active-l1" typeId="power">
				<label>Power Act. L1</label>
			</channel>
			<channel id="inverter-power-active-l2" typeId="power">
				<label>Power Act. L2</label>
			</channel>
			<channel id="inverter-power-active-l3" typeId="power">
				<label>Power Act. L3</label>
			</channel>
			<channel id="inverter-power-reactive-l1" typeId="power">
				<label>Power React. L1</label>
			</channel>
			<channel id="inverter-power-reactive-l2" typeId="power">
				<label>Power React. L2</label>
			</channel>
			<channel id="inverter-power-reactive-l3" typeId="power">
				<label>Power React. L3</label>
			</channel>
			<channel id="consumption-power-l1" typeId="power">
				<label>Consumpt. Power L1</label>
			</channel>
			<channel id="consumption-power-l2" typeId="power">
				<label>Consumpt. Power L2</label>
			</channel>
			<channel id="consumption-power-l3" typeId="power">
				<label>Consumpt. Power L3</label>
			</channel>
			<channel id="consumption-power-reactive-l1" typeId="power">
				<label>Consumpt. Power React. L1</label>
			</channel>
			<channel id="consumption-power-reactive-l2" typeId="power">
				<label>Consumpt. Power React. L2</label>
			</channel>
			<channel id="consumption-power-reactive-l3" typeId="power">
				<label>Consumpt. Power React. L3</label>
			</channel>
			<channel id="solar-pv" typeId="power">
				<label>Solar Power</label>
			</channel>
			<channel id="positive-dc-link-voltage" typeId="electric-potential">
				<label>Pos. DC Link Voltage</label>
			</channel>
			<channel id="negative-dc-link-voltage" typeId="electric-potential">
				<label>Neg. DC Link Voltage</label>
			</channel>
			<channel id="grid-energy-produced-l1" typeId="energy">
				<label>Grid Energy Prod. L1</label>
			</channel>
			<channel id="grid-energy-produced-l2" typeId="energy">
				<label>Grid Energy Prod. L2</label>
			</channel>
			<channel id="grid-energy-produced-l3" typeId="energy">
				<label>Grid Energy Prod. L3</label>
			</channel>
			<channel id="grid-energy-consumed-l1" typeId="energy">
				<label>Grid Energy Cons. L1</label>
			</channel>
			<channel id="grid-energy-consumed-l2" typeId="energy">
				<label>Grid Energy Cons. L2</label>
			</channel>
			<channel id="grid-energy-consumed-l3" typeId="energy">
				<label>Grid Energy Cons. L3</label>
			</channel>
			<channel id="inverter-energy-produced-l1" typeId="energy">
				<label>Energy Prod. L1</label>
			</channel>
			<channel id="inverter-energy-produced-l2" typeId="energy">
				<label>Energy Prod. L2</label>
			</channel>
			<channel id="inverter-energy-produced-l3" typeId="energy">
				<label>Energy Prod. L3</label>
			</channel>
			<channel id="inverter-energy-consumed-l1" typeId="energy">
				<label>Energy Cons. L1</label>
			</channel>
			<channel id="inverter-energy-consumed-l2" typeId="energy">
				<label>Energy Cons. L2</label>
			</channel>
			<channel id="inverter-energy-consumed-l3" typeId="energy">
				<label>Energy Cons. L3</label>
			</channel>
			<channel id="load-energy-produced-l1" typeId="energy">
				<label>Load Energy Prod. L1</label>
			</channel>
			<channel id="load-energy-produced-l2" typeId="energy">
				<label>Load Energy Prod. L2</label>
			</channel>
			<channel id="load-energy-produced-l3" typeId="energy">
				<label>Load Energy Prod. L3</label>
			</channel>
			<channel id="load-energy-consumed-l1" typeId="energy">
				<label>Load Energy Cons. L1</label>
			</channel>
			<channel id="load-energy-consumed-l2" typeId="energy">
				<label>Load Energy Cons. L2</label>
			</channel>
			<channel id="load-energy-consumed-l3" typeId="energy">
				<label>Load Energy Cons. L3</label>
			</channel>
			<channel id="grid-energy-produced-total" typeId="energy">
				<label>Grid Energy Prod. Tot.</label>
			</channel>
			<channel id="grid-energy-consumed-total" typeId="energy">
				<label>Grid Energy Cons. Tot.</label>
			</channel>
			<channel id="inverter-energy-produced-total" typeId="energy">
				<label>Energy Prod. Tot.</label>
			</channel>
			<channel id="inverter-energy-consumed-total" typeId="energy">
				<label>Energy Cons. Tot.</label>
			</channel>
			<channel id="load-energy-produced-total" typeId="energy">
				<label>Load Energy Prod. Tot.</label>
			</channel>
			<channel id="load-energy-consumed-total" typeId="energy">
				<label>Load Energy Cons. Tot.</label>
			</channel>
			<channel id="total-solar-energy" typeId="energy">
				<label>Tot. Solar Energy</label>
			</channel>
			<channel id="state" typeId="string">
				<label>SoC</label>
			</channel>
			<channel id="timestamp" typeId="date-time">
				<label>Published Time</label>
			</channel>
			<channel id="battery-energy-produced" typeId="energy">
				<label>Batt. Energy Prod.</label>
			</channel>
			<channel id="battery-energy-consumed" typeId="energy">
				<label>Batt. Energy Cons.</label>
			</channel>
			<channel id="soc" typeId="percentage">
				<label>SoC</label>
			</channel>
			<channel id="soh" typeId="percentage">
				<label>SoH</label>
			</channel>
			<channel id="power-battery" typeId="power">
				<label>Batt. Power</label>
			</channel>
			<channel id="total-capacity-batteries" typeId="energy">
				<label>Tot. Rated Cap. Batt.</label>
			</channel>
		            
			<channel id="request-charge" typeId="request">
				<label>RequestCharge</label>
			</channel>
			<channel id="request-discharge" typeId="request">
				<label>RequestDischarge</label>
			</channel>
			<channel id="request-auto" typeId="request">
				<label>RequestAuto</label>
			</channel>
		</channels>
		
		<representation-property>hostName</representation-property>

		<config-description>
			<parameter name="hostName" type="text" required="true">
				<context>network-address</context>
				<label>Hostname</label>
				<description>Hostname / IP </description>
			</parameter>
			<parameter name="userName" type="text" required="true">
				<context>username</context>
				<label>Username</label>
				<description>Username</description>
			</parameter>
			<parameter name="password" type="text" required="true">
				<context>password</context>
				<label>Password</label>
				<description>Password</description>
			</parameter>
			<parameter name="refreshInterval" type="integer" min="30" unit="s" required="true">
				<label>Refresh Interval</label>
				<description>Refresh Interval, Sec.</description>
				<default>60</default>
			</parameter>
			<parameter name="hasBattery" type="boolean" required="false">
				<label>Battery Available</label>
				<description>Battery Connected?</description>
				<default>false</default>
			</parameter>
		</config-description>
	</thing-type>
	
	<channel-group-type id="sso">
        <label>SSO</label>
        <description>This is a group of SSO channels</description>
        <channels>
            <channel id="id" typeId="string">
                <label>Identifier</label>
            </channel>
            <channel id="pv-voltage" typeId="electric-potential">
                <label>Voltage, PV String</label>
            </channel>
            <channel id="pv-current" typeId="electric-current">
                <label>Current, PV String</label>
            </channel>
            <channel id="total-solar-energy" typeId="energy">
                <label>Tot. Solar Energy</label>
            </channel>
            <channel id="relay-status" typeId="string">
                <label>RelayStatus</label>
            </channel>
            <channel id="temperature" typeId="temperature">
                <label>Temperature, PCB</label>
            </channel>
            <channel id="fault-code" typeId="string">
                <label>FaultCode</label>
            </channel>
            <channel id="dc-link-voltage" typeId="electric-potential">
                <label>DC Link Voltage</label>
            </channel>
            <channel id="timestamp" typeId="date-time">
                <label>Published Time</label>
            </channel>
        </channels>
    </channel-group-type>
    
    <channel-group-type id="esm">
        <label>ESM</label>
        <description>This is a group of ESM channels</description>
        <channels>
            <channel id="id" typeId="string">
                <label>Identifier</label>
            </channel>
            <channel id="soh" typeId="percentage">
                <label>SoH</label>
            </channel>
            <channel id="soc" typeId="percentage">
                <label>SoC</label>
            </channel>
            <channel id="total-capacity" typeId="energy">
                <label>Rated Capacity</label>
            </channel>
            <channel id="power-battery" typeId="power">
                <label>Rated Power, Batt.</label>
            </channel>
            <channel id="status" typeId="string">
                <label>Status</label>
            </channel>
            <channel id="timestamp" typeId="date-time">
                <label>Published Time</label>
            </channel>
        </channels>
    </channel-group-type>
    
    <channel-group-type id="eso">
        <label>ESO</label>
        <description>This is a group of ESO channels</description>
        <channels>
        <channel id="id" typeId="string">
            <label>Identifier</label>
        </channel>
        <channel id="voltage-battery" typeId="electric-potential">
            <label>Voltage, Battery</label>
        </channel>
        <channel id="current-battery" typeId="electric-current">
            <label>Current, Battery</label>
        </channel>
        <channel id="battery-energy-produced" typeId="energy">
            <label>Batt. Energy Prod.</label>
        </channel>
        <channel id="battery-energy-consumed" typeId="energy">
            <label>Batt. Energy Cons.</label>
        </channel>
        <channel id="soc" typeId="percentage">
            <label>SoC</label>
        </channel>
        <channel id="relay-status" typeId="string">
            <label>RelayStatus</label>
        </channel>
        <channel id="temperature" typeId="temperature">
            <label>Temperature, PCB</label>
        </channel>
        <channel id="fault-code" typeId="string">
            <label>FaultCode</label>
        </channel>
        <channel id="dc-link-voltage" typeId="electric-potential">
            <label>DC Link Voltage</label>
        </channel>
        <channel id="timestamp" typeId="date-time">
            <label>Published Time</label>
        </channel>
    </channels>
    </channel-group-type>

	<channel-type id="energy">
		<item-type>Number:Energy</item-type>
		<label>Energy</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="electric-current">
		<item-type>Number:ElectricCurrent</item-type>
		<label>Electric Current</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="power">
		<item-type>Number:Power</item-type>
		<label>Power</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="date-time">
		<item-type>DateTime</item-type>
		<label>Date Time</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%1$tc"/>
	</channel-type>

	<channel-type id="electric-potential">
		<item-type>Number:ElectricPotential</item-type>
		<label>Electrical Potential</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="frequency">
		<item-type>Number:Frequency</item-type>
		<label>Frequency</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="percentage">
		<item-type unitHint="%">Number:Dimensionless</item-type>
		<label>Percentage</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="temperature">
		<item-type>Number:Temperature</item-type>
		<label>Temperature</label>
		<category>Energy</category>
		<state readOnly="true" pattern="%.2f %unit%"/>
	</channel-type>

	<channel-type id="string">
		<item-type>String</item-type>
		<label>String</label>
		<category>Energy</category>
		<state readOnly="true"/>
	</channel-type>

	<channel-type id="request">
		<item-type>String</item-type>
		<label>String</label>
		<description>Control Of System</description>
		<category>Energy</category>
		<state readOnly="false"/>
	</channel-type>

</thing:thing-descriptions>
